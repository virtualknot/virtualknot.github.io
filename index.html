<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create Your Own Knot</title>
  <script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.1.js"></script>
  <script src="https://rawgit.com/ngokevin/aframe-text-component/master/dist/aframe-text-component.min.js"></script>
</head>
<body>
  <a-scene>
    <!-- cam -->
    <a-entity id="camera" rotation="0 0 0" position="0 0 5">
      <a-camera>
        <a-entity cursor="maxDistance:10000" position="0 0 -1" geometry="primitive:ring; color:pink; radiusInner:.005; radiusOuter:.01"></a-entity>
      </a-camera>
    </a-entity>
    <!-- #knot -->
    <a-entity id="knot">
      <a-entity id="knott" geometry="primitive:torusKnot; p:" + pVal + "; q:" + qVal+ ";" rotation="0 0 0" material="color:#D5573B"></a-entity>
    </a-entity>
    <!-- knot p and q val buttons -->
    <a-entity>
      <a-entity id="upP" geometry="primitive:plane" scale=".7 .7 .7" position ="-3.5 1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-up-b-128.png)"</a-entity>
    </a-entity>
    <a-entity>
      <a-entity id="downP" geometry="primitive:plane" scale=".7 .7 .7" position ="-3.5 -1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-down-b-128.png)"</a-entity>
    </a-entity>
    <a-entity>
      <a-entity id="upQ" geometry="primitive:plane" scale=".7 .7 .7" position ="-2.5 1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-up-b-128.png)"</a-entity>
    </a-entity>
    <a-entity>
      <a-entity id="downQ" geometry="primitive:plane" scale=".7 .7 .7" position ="-2.5 -1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-down-b-128.png)"</a-entity>
    </a-entity>
    <!-- to have button descriptions for the knot's p and q value -->
    <a-entity class="vals pValText" position="-3.75 0 0" material="color:purple" scale=".4 .4 .4" text="text:pVal"></a-entity>
    <a-entity class="vals qValText" position="-2.75 0 0" material="color:#F7CAC9" scale=".4 .4 .4" text="text:qVal"></a-entity>
    <!-- radius button and descriptions -->
    <a-entity class="vals radiusText" position="2.15 0 0" material="color:#F7CAC9" scale=".3 .3 .3" text="text:radius"></a-entity>
    <a-entity>
      <a-entity id="upRadius" geometry="primitive:plane" scale=".7 .7 .7" position ="2.5 1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-up-b-128.png)"</a-entity>
    </a-entity>
    <a-entity>
      <a-entity id="downRadius" geometry="primitive:plane" scale=".7 .7 .7" position ="2.5 -1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-down-b-128.png)"</a-entity>
    </a-entity>
    <!-- rotation buttons and description -->
    <!-- up and down rotation tags -->
    <a-entity class="vals rotationText" position="3.5 .3 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 -90" text="text:rotation"></a-entity>
    <a-entity class="vals rotationText" position="3.4 .47 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 0" text="text:up"></a-entity>
    <a-entity class="vals rotationText" position="3.35 -.6 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 0" text="text:down"></a-entity>
    <!-- left and right rotation tags -->
    <a-entity class="vals rotationText" position="4.5 .3 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 -90" text="text:rotation"></a-entity>
    <a-entity class="vals rotationText" position="4.4 .47 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 0" text="text:left"></a-entity>
    <a-entity class="vals rotationText" position="4.35 -.6 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 0" text="text:right"></a-entity>
    <!-- z rotation tags -->
    <a-entity class="vals rotationText" position="5.4 .47 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 0" text="text:zup"></a-entity>
    <a-entity class="vals rotationText" position="5.35 -.6 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 0" text="text:zdown"></a-entity>
    <a-entity class="vals rotationText" position="5.5 .3 0" material="color:#F7CAC9" scale=".25 .25 .25" rotation="0 0 -90" text="text:rotation"></a-entity>
    <!-- whole rotation number -->
    <a-entity class="vals rotationNumber" position="3 1.75 0" material="color:#F7CAC9" scale=".6 .6 .6" rotation="0 0 0" text="text:rotation"></a-entity>
    <!-- rotation buttons -->
    <!-- up and down rotation -->
    <a-entity>
      <a-entity id="upRotation" geometry="primitive:plane" scale=".7 .7 .7" position ="3.5 1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-up-b-128.png)"</a-entity>
    </a-entity>
    <a-entity>
      <a-entity id="downRotation" geometry="primitive:plane" scale=".7 .7 .7" position ="3.5 -1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-down-b-128.png)"</a-entity>
    </a-entity>
    <!-- left and right rotation -->
    <a-entity>
      <a-entity id="leftRotation" geometry="primitive:plane" scale=".7 .7 .7" position ="4.5 1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-up-b-128.png)"</a-entity>
    </a-entity>
    <a-entity>
      <a-entity id="rightRotation" geometry="primitive:plane" scale=".7 .7 .7" position ="4.5 -1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-down-b-128.png)"</a-entity>
    </a-entity>
    <!-- z rotations -->
    <a-entity>
      <a-entity id="zUpRotation" geometry="primitive:plane" scale=".7 .7 .7" position ="5.5 1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-up-b-128.png)"</a-entity>
    </a-entity>
    <a-entity>
      <a-entity id="zDownRotation" geometry="primitive:plane" scale=".7 .7 .7" position ="5.5 -1 0" material="src:url(https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-arrow-down-b-128.png)"</a-entity>
    </a-entity>
    <a-sky color="#777DA7"></a-sky>
  </a-scene>
  <script>
  //mind your p's and q's
  var pVal = 2;
  var qVal = 3;
  var radius = 0.2;
  var a = 0;
  var b = 0;
  var c = 0;
  var rotationcleanse = function(type) {
    return Math.abs(type);
  }
  var rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
  // updated knot after value knot changes, refactor
  var refreshKnot = function() {
    $('#knott').attr("geometry", "primitive:torusKnot; p:" + pVal + "; q:" + qVal + "; radiusTubular:" + radius +";");
    $('#knott').attr("rotation", rotation);
  };
  // updates value text tags after knot changes, refactor
  var valText = function(target, val) {
    $(target).attr("text", "text:pVal: " + val);
  };
  // updates radius text tags after radius changes, refactor
  var radiusText = function() {
    return $('.radiusText').attr("text", "text:radius: " + radius.toFixed(2));
  };
  var rotationNumber = function() {
    return $('.rotationNumber').attr("text", "text:rotation:" + rotation);
  };
  //Button actions to change p and q values
  $('#upP').on('click', function() {
    pVal++
    refreshKnot();
    valText('.pValText', pVal);
  });
  $('#downP').on('click', function() {
    pVal--
    refreshKnot();
    valText('.pValText', pVal);
  });
  $('#upQ').on('click', function() {
    qVal++
    refreshKnot();
    valText('.qValText', qVal);
  });
  $('#downQ').on('click', function() {
    qVal--
    refreshKnot();
    valText('.qValText', qVal);
  });
  //Button actions to change radius of knot
  $('#upRadius').on('click', function() {
    radius = radius + .01;
    refreshKnot();
    radiusText();
  });
  $('#downRadius').on('click', function() {
    radius = radius - .01;
    refreshKnot();
    radiusText();
  });
  //Button actions to make knot rotate, could refactor passing in the variable we want to change
  $('#leftRotation').on('click', function() {
    b -= 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  $('#rightRotation').on('click', function() {
    b += 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  $('#upRotation').on('click', function() {
    a -= 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  $('#downRotation').on('click', function() {
    a += 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  $('#upRotation').on('click', function() {
    a -= 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  $('#downRotation').on('click', function() {
    a += 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  $('#zUpRotation').on('click', function() {
    c -= 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  $('#zDownRotation').on('click', function() {
    c += 20;
    rotation = " " + rotationcleanse(a) + " " + rotationcleanse(b) + " " + rotationcleanse(c) + " ";
    refreshKnot();
    rotationNumber();
  });
  </script>
</body>
</html>
